<!-- message.tmpl -->
{{ define "message" }}
  <div class="box">
    <form action="{{ .Paths.Message }}"
         enctype="application/x-www-form-urlencoded"
          method="post">
      <input class="selectMessage"
              name="message"
         maxlength="{{ .Limit.CharsMsg }}"
       placeholder="{{ .Placeholder.Message }}"
             title="message text content"
              type="text" required>
      {{ if .Auth.Require.Message }} {{ template "auth" . }} {{ end }}
      <input class="selectPost"
             title="post message"
              type="submit"
             value="post">
    </form>
    {{ range .Storage.Messages }}
    <div class="message"><b>{{ .Count }}</b> {{ .Data }}
      <span class="owner">{{ .Owner.Mask }} at {{ .Time.Allow }}</span>
    </div>
    <br>
    {{ end }}
    <form action="" style="display:inline;">
      <button class="selectRefresh"
              title="refresh messages"
               type="submit">refresh</button>
    </form>
    <form action="{{ .Paths.Message }}"
          method="post"
           style="display:inline;">
      <input type="hidden" name="clear" value="true">
      <button class="selectClear" {{ if not .Storage.Messages }} disabled {{ end }}
              title="clear messages"
               type="submit">clear</button>
    </form>
    <form action="{{ .Paths.Message }}"
           style="display:inline;">
      <input type="hidden" name="download" value="all">
      <button class="selectRefresh" {{ if not .Storage.Messages }} disabled {{ end }}
              title="download messages"
               type="submit">download</button>
    </form>
  </div>
{{ end }}
