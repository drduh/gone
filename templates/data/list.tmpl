<!-- list.tmpl -->
{{ define "list" }}
  <div class="box">
    {{ if not .Storage.Files }}
    <p>{{ .NoFiles }}</p>
    {{ else }}
    {{ if .Auth.Require.List }}
    <form action="{{ .Paths.List }}"
          method="get">
      {{ template "auth" . }}
      <input class="selectSubmit"
              type="submit"
             value="list">
    </form>
    {{ end }}
    <form action="{{ .Paths.Download }}"
          method="get">
      <br>
      {{ if not .Auth.Require.List }}
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Size</th>
            <th>Type</th>
            <th>Owner</th>
            <th>Time</th>
          </tr>
        </thead>
        <tbody>
        {{ range .Storage.Files }}
        <tr class="list-row">
          <td>
            <label for="{{ .Name }}">{{ .Name }}</label>
            <input id="{{ .Name }}"
                 name="name"
                 type="radio"
                value="{{ .Name }}" required>
          </td>
          <td> <label for="{{ .Name }}">{{ .Size }}</label>          </td>
          <td> <label for="{{ .Name }}">{{ .Type }}</label>          </td>
          <td> <label for="{{ .Name }}">{{ .Owner.Address }}</label> </td>
          <td> <label for="{{ .Name }}">{{ .Time.Remain }}</label>   </td>
        </tr>
        {{ end }}
        </tbody>
      </table>
      <br>
      {{ end }}
      {{ if .Auth.Require.Download }} {{ template "auth" . }} {{ end }}
      <input class="selectSubmit"
             title="download selected file"
              type="submit"
             value="download">
    </form>
    {{ end }}
  </div>
{{ end }}
